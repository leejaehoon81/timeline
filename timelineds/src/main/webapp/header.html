<div class="navbar navbar-custom navbar-abs" role="navigation">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse"
				data-target=".navbar-collapse">
				<i class="ion-navicon"></i>
			</button>
			<a class="navbar-brand logo" href="index.html" id="logo"> <i
				class="ion-social-buffer"></i> <span>MemoryFactory</span>
				<span id="chronicleZoom"></span>
			</a>
		</div>

		<!-- menu -->
		<div class="navbar-collapse collapse">
			<ul class="nav navbar-nav navbar-right">
				<li><a href="#" data-toggle="modal" onclick="openLoginModal();" id="loginBtn">Login</a> 
				    <a href="#" data-toggle="modal" onclick="FBLogout();" style="display: none;" id="FBLogout">Logout</a>
				</li>
				<li class="dropdown">
				  <a href="#" data-toggle="dropdown" id="mypage" style="display: none;">
					  <span id='emailInfo' data-return="false"></span>
						<span class="caret"></span>
				  </a>
					<ul class="dropdown-menu arrow">
						<li><a href="#">내 연대기</a></li>
						<li><a href="#" id="myInfo" onclick="openInfoModal()">내 정보</a></li>
						<li><a href="#" id="logout" onclick="FBLogout();">로그아웃</a></li>
					</ul></li>
			</ul>
		</div>
	</div>
</div>
<!-- end of nav -->


<!-- start modal -->
<div class="modal fade login" id="loginModal">
	<div class="modal-dialog login animated">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title">Login with</h4>
			</div>
			<div class="modal-body">
				<div class="box">
					<!-- login -->
					<div class="content">
						<div class="social">
							<div class="fb_login" style="cursor: pointer; cursor: hand;" onclick="FBLogin();">페이스북 로그인</div>
							<div class="fb_register" style="cursor: pointer; cursor: hand; display: none;" onclick="FBLogin();">페이스북 계정으로 회원가입</div>
						</div>
						<div class="division">
							<div class="line l"></div>
							<span>or</span>
							<div class="line r"></div>
						</div>
						<div class="warning"></div>
						<div class="form loginBox">
							<form>
								<input id="userEmail" class="form-control" type="text" placeholder="Email" name="userEmail"> 
								<input id="userPass" class="form-control" type="password" placeholder="Password" name="userPass"> 
								<input id="loginEmail" class="btn btn-default btn-login" type="button" value="Login" onclick="loginAjax()">
							</form>
						</div>
					</div>
				</div>
				<div class="box">
					<!-- register -->
					<div class="content registerBox" style="display: none;">
						<div class="form">
							<form>
								<input id="registerEmail" class="form-control" type="text" placeholder="Email" name="registerEmail">
								  <span id="message"></span> 
								<input id="registerPass" class="form-control" type="password" placeholder="Password" name="registerPass"> 
								<input id="password_confirmation" 
								       class="form-control" type="password" placeholder="Repeat Password" 
								       name="password_confirmation" onkeyup="checkPass(); return false;"> 
								  <span id="passMsg"></span> 
								<input id="createAcc" class="btn btn-default btn-register" type="button" value="Create account" name="commit">
							</form>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<div class="forgot login-footer">
					<span>아직 회원이 아니신가요? <a href="javascript: showRegisterForm();" id="myLink">회원가입하기</a>
					</span>
				</div>
				<div class="forgot register-footer" style="display: none">
					<span>MemoryFactory 회원이시면</span> 
				<a href="javascript: showLoginForm();" id="myLink">Login</a>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- end of modal -->


<!-- info modal -->
<div class="modal fade login" id="infoModal">
	<div class="modal-dialog login animated">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title">회원정보</h4>
			</div>
			<div class="modal-body">
				<div class="box">
					<!-- 회원정보 컨텐츠 -->
					<div class="content">
						<div id="infoPic"></div>
						<div id="infoEmail"></div>
						<div id="infoName"></div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<!-- 확인/취소 버튼만들기 -->
				<div class="forgot login-footer">
					<div id="confirmBox">확인</div>
          <div id="cancelBox">취소</div>
				</div>
				<div class="forgot register-footer" style="display: none">
					<span>Already have an account?</span> <a
						href="javascript: showLoginForm();">Login</a>
				</div>
			</div>
		</div>
	</div>
</div>


<!-- 연대기 생성 모달 -->
<div class="modal fade login" id="chronicleModal">
	<div class="modal-dialog login animated">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
					aria-hidden="true">&times;</button>
				<h4 class="modal-title">첫 연대기</h4>
			</div>
			<div class="modal-body">
				<div class="box">
					<div class="input-group date">
						<input type="text" class="form-control" id="myCal"> <span
							class="input-group-addon"> <i
							class="glyphicon glyphicon-th"></i>
						</span>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<!-- 확인/취소 버튼만들기 -->
				<div class="forgot login-footer">
					<span>Looking to <a href="javascript: showRegisterForm();">create
							an account</a> ?
					</span>
				</div>
				<div class="forgot register-footer" style="display: none">
					<span>Already have an account?</span> <a
						href="javascript: showLoginForm();">Login</a>
				</div>
			</div>
		</div>
	</div>
</div>


<script>

  require([ 'login-register', 'bootstrap', 'jquery-easing', 'jquery-magnific',
      'smooth', 'wow', 'main-app', 'facebook', 'datepicker' ],
      function() {
        loginInfo();
      });

  $('#registerEmail').keyup(
      function(event) {
        $.getJSON(
        'http://localhost:8888/member/existEmail.do', {
          email : $(this).val()
        }, function(result) {
          if (result.data == 'no') {
            $('#message').removeClass('my-message-warning').addClass(
                'my-message-success').html('사용 가능합니다.');
          } else {
            $('#message').removeClass('my-message-success').addClass(
                'my-message-warning').html('이미 등록된 이메일입니다.');
          }
        });
      });

  function checkPass() {
    if ($('#registerPass').val() == $('#password_confirmation').val()) {
      $('#passMsg').removeClass('my-message-warning').addClass(
          'my-message-success').html('비밀번호가 일치합니다');
      $('#createAcc').show();
    } else {
      $('#passMsg').removeClass('my-message-success').addClass(
          'my-message-warning').html('비밀번호가 일치하지 않습니다');
      $('#createAcc').hide();
    }
  };
</script>
